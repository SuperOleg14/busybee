"use strict";function updateSummaryPreview(e,t,a,r){var i=document.querySelector(".summary-preview-service"),n=i.querySelector('[data-extras="'.concat(e,'"]'));if(n){n.querySelector(".main-form__right_preview--text").textContent="£".concat(a.toFixed(2))}else{var o='\n            <div class="main-form__right_preview--item d-flex --just-space" data-extras="'.concat(e,'" ').concat(r?'data-form_cleaning="'.concat(r,'"'):"",'>\n                <div class="main-form__right_preview--title">').concat(t,'</div>\n                <div class="main-form__right_preview--text">£').concat(a.toFixed(2),"</div>\n            </div>\n        ");i.insertAdjacentHTML("beforeend",o)}}function handleQuantityNumChange(e){var t=e.target,a=t.closest(".form-checkbox-item"),r=a.querySelector("[data-price]"),i=parseFloat(r.dataset.price),n=t.dataset.extras,o=parseFloat(t.value),c=o;(o<1||isNaN(o))&&(c=1,t.value=1),updateSummaryPreview(n,a.querySelector(".extras_label").textContent.trim(),i*c)}function getSelectedExtras(){document.querySelectorAll(".extras_label").forEach(function(e){e.addEventListener("change",function(e){var t=e.target.name,a=(document.querySelector('[data-extras="'.concat(t,'"]')).value,e.target.checked),r=e.target.nextElementSibling.textContent.trim(),i=e.target.closest(".form-checkbox-item").querySelector("[data-price]"),n=parseFloat(i.dataset.price),o=parseFloat(document.querySelector('[data-extras="'.concat(t,'"].quantity-num')).value),c=e.target.closest(".form-checkbox-item").getAttribute("data-form_cleaning"),s=c?parseInt(c,10):void 0;if(a)updateSummaryPreview(t,r,n*o,s);else{var m=document.querySelector('.main-form__right_preview--item[data-extras="'.concat(t,'"]'));m&&m.remove()}})}),document.querySelectorAll(".quantity-num").forEach(function(e){e.addEventListener("input",handleQuantityNumChange)}),document.querySelectorAll(".extras .quantity-arrow").forEach(function(e){e.addEventListener("click",function(e){var t=e.target.closest(".form-checkbox-item"),a=t.querySelector("[data-price]"),r=parseFloat(a.dataset.price),i=t.querySelector(".quantity-num"),n=i.dataset.extras,o=parseFloat(i.value),c=o+1;e.target.classList.contains("quantity-arrow-plus")?c=o+1:e.target.classList.contains("quantity-arrow-minus")&&(c=o>1?o-1:1),updateSummaryPreview(n,t.querySelector(".extras_label").textContent.trim(),r*c)})})}$('.form-radios input[type="radio"]').change(function(){$(this).closest(".form-radios").find("label").removeClass("checked"),$(this).is(":checked")&&$(this).closest("label").addClass("checked")}),$(function(){!function(){function e(){var e=$(this).siblings(".quantity-num"),t=+e.val();"bedrooms"!==e.attr("name")&&t<=1||"bedrooms"===e.attr("name")&&t<=0||t>0&&e.val(t-1)}function t(){var e=$(this).siblings(".quantity-num");e.val(+e.val()+1)}var a=$(".quantity-arrow-minus"),r=$(".quantity-arrow-plus");a.click(e),r.click(t)}()}),$(document).ready(function(){function e(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];$(e).show(),$(t).hide(),a?$(".form-number-item-bathrooms").hide():$(".form-number-item-bathrooms").show()}function t(){var e=$('input[name="postcode"]').val().toUpperCase(),t=$('input[name="type_cleaning"]:checked').data("type_cleaning");$.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",dataType:"json",data:{action:"busy_bee_get_supported_postcodes"},success:function(r){var i=a(e,r.supported,r.unsupported,t);"supported"===i?($(".main-form__right_postcode").text(e),$(".error-message").text("Cleaner is available in your area").removeClass("search-error").addClass("search-success")):"unsupported"===i?($(".main-form__right_postcode").text(""),$(".error-message").text("Unfortunately we don’t cover your area").removeClass("search-success").addClass("search-error")):($(".main-form__right_postcode").text(""),$(".error-message").text("Please enter a valid postcode").removeClass("search-success").addClass("search-error"))},error:function(e){console.error(e)}})}function a(e,t,a,r){var i=e.toUpperCase();if(t.includes(i))return"supported";if(a.includes(i))return 6===r?"supported":"unsupported";if(i.length>=4){var n=i.substring(0,4);if(t.includes(n))return"supported";if(a.includes(n))return 6===r?"supported":"unsupported"}if(i.length>=3){var o=i.substring(0,3);if(t.includes(o))return"supported";if(a.includes(o))return 6===r?"supported":"unsupported"}return"invalid"}flatpickr("#datepick_selector",{altInput:!0,altFormat:"Y-m-d",dateFormat:"Y-m-d",defaultDate:new Date,minDate:new Date}),$('input[name="square_footage"]').on("input",function(){var e=$(this).val();$(".main-form__right_preview--item--square .main-form__right_preview--text").text(e+" m2")}),$('input[name="date"]').on("input",function(){var e=$(this).val();$(".main-form__right_preview--item--date .main-form__right_preview--text").text(e)}),$('input[name="often_work"]').change(function(){var e=$('input[name="often_work"]:checked').val();$(".main-form__right_preview--item--often .main-form__right_preview--text").text(e)});var r="",i="";$('input[name="square_footage"]').on("input",function(){var e=parseFloat($(this).val());r=e>1?e.toString()+" m²":"";var t=$('input[name="type_cleaning"]:checked').data("type_cleaning");if(6!==t&&(i=$(this).val()),$('.summary-preview-service .main-form__right_preview--item[data-form_cleaning="square"]').remove(),6!==t&&""!==r||""!==i){var a=""!==i?i+" m²":r,n='\n            <div class="main-form__right_preview--item d-flex --just-space" data-form_cleaning="square">\n                <div class="main-form__right_preview--title">\n                    Square\n                </div>\n                <div class="main-form__right_preview--text">\n                    '.concat(a,"\n                </div>\n            </div>\n        ");6!==t&&$(".summary-preview-service").append(n)}}),$('input[name="type_cleaning"]').change(function(){if(6!==$(this).data("type_cleaning")){var e=$('input[name="square_footage"]').val();if(""!==e){var t=$('.summary-preview-service .main-form__right_preview--item[data-form_cleaning="square"]');if(0===t.length){var a='\n                    <div class="main-form__right_preview--item d-flex --just-space" data-form_cleaning="square">\n                        <div class="main-form__right_preview--title">\n                            Square\n                        </div>\n                        <div class="main-form__right_preview--text">\n                            '.concat(e," m²\n                        </div>\n                    </div>\n                ");$(".summary-preview-service").append(a)}else t.find(".main-form__right_preview--text").text(e+" m²")}}else $('.summary-preview-service .main-form__right_preview--item[data-form_cleaning="square"]').remove()}),$('input[name="type_cleaning"]').change(function(){var e=$(this).data("type_cleaning"),t=$(".summary-preview-service .main-form__right_preview--item");6===e?(t.hide(),$(".summary-commercial-preview").remove(),$(".summary-preview-service").append('<div class="summary-commercial-preview main-form__right_preview--item main-form__right_preview--item--square d-flex --just-space"><div class="main-form__right_preview--title">Square</div><div class="main-form__right_preview--text">'+$('input[name="square_footage"]').val()+' m2</div></div><div class="summary-commercial-preview main-form__right_preview--item main-form__right_preview--item--date d-flex --just-space"><div class="main-form__right_preview--title">Date</div><div class="main-form__right_preview--text">'+$('input[name="date"]').val()+'</div></div><div class="summary-commercial-preview main-form__right_preview--item main-form__right_preview--item--often d-flex --just-space"><div class="main-form__right_preview--title">How Often</div><div class="main-form__right_preview--text">'+$('input[name="often_work"]:checked').val()+"</div></div>")):(t.show(),$(".summary-commercial-preview").remove())}),$(".extras_label").change(function(){var e=$(this).is(":checked"),t=$(this).attr("id"),a=$('input[data-extras="'+t+'"]'),r=a.closest(".form-checkbox-item").find(".form-number");e?r.show():r.hide()}),$('input[name="type_cleaning"]').change(function(){var t=$(this).attr("class"),a=$(this).val();t.includes("all_cleaning")?e(".form-checkbox-item.all_cleaning",".form-checkbox-item:not(.all_cleaning)"):t.includes("deep_cleaning")?e(".form-checkbox-item.deep_cleaning",".form-checkbox-item:not(.deep_cleaning)"):t.includes("domestic_cleaning")?e(".form-checkbox-item.domestic_cleaning",".form-checkbox-item:not(.domestic_cleaning)"):t.includes("carpet_cleaning")&&e(".form-checkbox-item.carpet_cleaning",".form-checkbox-item:not(.carpet_cleaning)",!0),$(this).hasClass("often_work_cleaning")?$(".often_work").hide():$(".often_work").show(),$(this).hasClass("domestic_cleaning")?($(".form-radios-furnished").hide(),$(".cleaning_products").show()):($(".form-radios-furnished").show(),$(".cleaning_products").hide()),$(this).hasClass("commercial_cleaning")?$(".extras, .space-option, .main-form__right_price, .payment-method").hide():$(".extras, .space-option, .main-form__right_price, .payment-method").show(),$(".preview-type-cleaning").text(a)}),$('input[name="postcode"]').on("blur",function(){t()}),$('input[name="type_cleaning"]').on("change",function(){$(".main-form__right_postcode").text(""),$(".error-message").text("").removeClass("search-success search-error"),t()}),$('input[name="postcode"]').on("keydown",function(e){13===e.which&&(e.preventDefault(),t())}),function(){var e=new URLSearchParams(window.location.search),t=e.get("postcode");t&&($('input[name="postcode"]').val(t),$(".main-form__right_postcode").text(t),$(".error-message").text("Cleaner is available in your area").removeClass("search-error").addClass("search-success"))}(),$('input[name="type_cleaning"]').on("change",function(){document.querySelectorAll(".form-checkbox-item[data-form_cleaning]").forEach(function(e){if("none"===window.getComputedStyle(e).display){var t=e.getAttribute("data-form_cleaning");document.querySelectorAll('.main-form__right_preview--item[data-form_cleaning="'.concat(t,'"]')).forEach(function(e){e.style.display="none"})}})})}),getSelectedExtras();